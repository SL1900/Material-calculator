var app=function(){"use strict";function t(){}function n(t,n){for(const e in n)t[e]=n[e];return t}function e(t){return t()}function l(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function c(t,n){t.appendChild(n)}function u(t,n,e){t.insertBefore(n,e||null)}function s(t){t.parentNode.removeChild(t)}function f(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function a(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function h(){return d(" ")}function m(t,n,e,l){return t.addEventListener(n,e,l),()=>t.removeEventListener(n,e,l)}function p(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function g(t){return""===t?null:+t}function $(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function v(t,n){t.value=null==n?"":n}let b;function y(t){b=t}function C(){const t=function(){if(!b)throw new Error("Function called outside component initialization");return b}();return(n,e,{cancelable:l=!1}={})=>{const o=t.$$.callbacks[n];if(o){const r=function(t,n,{bubbles:e=!1,cancelable:l=!1}={}){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,e,l,n),o}(n,e,{cancelable:l});return o.slice().forEach((n=>{n.call(t,r)})),!r.defaultPrevented}return!0}}function x(t,n){const e=t.$$.callbacks[n.type];e&&e.slice().forEach((t=>t.call(this,n)))}const j=[],w=[],_=[],E=[],A=Promise.resolve();let S=!1;function k(t){_.push(t)}const L=new Set;let O=0;function N(){const t=b;do{for(;O<j.length;){const t=j[O];O++,y(t),R(t.$$)}for(y(null),j.length=0,O=0;w.length;)w.pop()();for(let t=0;t<_.length;t+=1){const n=_[t];L.has(n)||(L.add(n),n())}_.length=0}while(j.length);for(;E.length;)E.pop()();S=!1,L.clear(),y(t)}function R(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(k)}}const T=new Set;let I;function B(){I={r:0,c:[],p:I}}function U(){I.r||o(I.c),I=I.p}function V(t,n){t&&t.i&&(T.delete(t),t.i(n))}function J(t,n,e,l){if(t&&t.o){if(T.has(t))return;T.add(t),I.c.push((()=>{T.delete(t),l&&(e&&t.d(1),l())})),t.o(n)}else l&&l()}function P(t,n){const e={},l={},o={$$scope:1};let r=t.length;for(;r--;){const i=t[r],c=n[r];if(c){for(const t in i)t in c||(l[t]=1);for(const t in c)o[t]||(e[t]=c[t],o[t]=1);t[r]=c}else for(const t in i)o[t]=1}for(const t in l)t in e||(e[t]=void 0);return e}function M(t){return"object"==typeof t&&null!==t?t:{}}function W(t){t&&t.c()}function q(t,n,l,i){const{fragment:c,on_mount:u,on_destroy:s,after_update:f}=t.$$;c&&c.m(n,l),i||k((()=>{const n=u.map(e).filter(r);s?s.push(...n):o(n),t.$$.on_mount=[]})),f.forEach(k)}function z(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function D(t,n){-1===t.$$.dirty[0]&&(j.push(t),S||(S=!0,A.then(N)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function F(n,e,r,i,c,u,f,a=[-1]){const d=b;y(n);const h=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:c,bound:l(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:l(),dirty:a,skip_bound:!1,root:e.target||d.$$.root};f&&f(h.root);let m=!1;if(h.ctx=r?r(n,e.props||{},((t,e,...l)=>{const o=l.length?l[0]:e;return h.ctx&&c(h.ctx[t],h.ctx[t]=o)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](o),m&&D(n,t)),e})):[],h.update(),m=!0,o(h.before_update),h.fragment=!!i&&i(h.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);h.fragment&&h.fragment.l(t),t.forEach(s)}else h.fragment&&h.fragment.c();e.intro&&V(n.$$.fragment),q(n,e.target,e.anchor,e.customElement),N()}y(d)}class G{$destroy(){z(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var H,K=new Uint8Array(16);function Q(){if(!H&&!(H="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return H(K)}var X=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Y(t){return"string"==typeof t&&X.test(t)}for(var Z=[],tt=0;tt<256;++tt)Z.push((tt+256).toString(16).substr(1));function nt(t,n,e){var l=(t=t||{}).random||(t.rng||Q)();if(l[6]=15&l[6]|64,l[8]=63&l[8]|128,n){e=e||0;for(var o=0;o<16;++o)n[e+o]=l[o];return n}return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=(Z[t[n+0]]+Z[t[n+1]]+Z[t[n+2]]+Z[t[n+3]]+"-"+Z[t[n+4]]+Z[t[n+5]]+"-"+Z[t[n+6]]+Z[t[n+7]]+"-"+Z[t[n+8]]+Z[t[n+9]]+"-"+Z[t[n+10]]+Z[t[n+11]]+Z[t[n+12]]+Z[t[n+13]]+Z[t[n+14]]+Z[t[n+15]]).toLowerCase();if(!Y(e))throw TypeError("Stringified UUID is invalid");return e}(l)}function et(t,n,e){const l=t.slice();return l[20]=n[e],l}function lt(t){let n,e;return{c(){n=a("div"),e=d(t[1]),p(n,"class","name svelte-1jn026s")},m(t,l){u(t,n,l),c(n,e)},p(t,n){2&n&&$(e,t[1])},d(t){t&&s(n)}}}function ot(t){let n,e,l;return{c(){n=a("input"),p(n,"type","text"),p(n,"class","name svelte-1jn026s")},m(o,r){u(o,n,r),v(n,t[6]),e||(l=[m(n,"input",t[13]),m(n,"input",t[11])],e=!0)},p(t,e){64&e&&n.value!==t[6]&&v(n,t[6])},d(t){t&&s(n),e=!1,o(l)}}}function rt(t){let n,e,l;return{c(){n=a("input"),p(n,"class","item-count-input svelte-1jn026s"),p(n,"type","number"),p(n,"min","1")},m(o,r){u(o,n,r),v(n,t[0]),e||(l=[m(n,"input",t[14]),m(n,"input",t[10]),m(n,"change",t[10])],e=!0)},p(t,e){1&e&&g(n.value)!==t[0]&&v(n,t[0])},d(t){t&&s(n),e=!1,o(l)}}}function it(t){let n;return{c(){n=d(t[7])},m(t,e){u(t,n,e)},p(t,e){128&e&&$(n,t[7])},d(t){t&&s(n)}}}function ct(n){let e,l,r,i,c;return{c(){e=a("div"),e.textContent="+",l=h(),r=a("div"),r.textContent="-",p(e,"class","btn svelte-1jn026s"),p(r,"class","btn svelte-1jn026s")},m(t,o){u(t,e,o),u(t,l,o),u(t,r,o),i||(c=[m(e,"click",n[8]),m(r,"click",n[9])],i=!0)},p:t,d(t){t&&s(e),t&&s(l),t&&s(r),i=!1,o(c)}}}function ut(t){let n,e,l=t[2],o=[];for(let n=0;n<l.length;n+=1)o[n]=st(et(t,l,n));const r=t=>J(o[t],1,1,(()=>{o[t]=null}));return{c(){n=a("div");for(let t=0;t<o.length;t+=1)o[t].c();p(n,"class","children svelte-1jn026s")},m(t,l){u(t,n,l);for(let t=0;t<o.length;t+=1)o[t].m(n,null);e=!0},p(t,e){if(172&e){let i;for(l=t[2],i=0;i<l.length;i+=1){const r=et(t,l,i);o[i]?(o[i].p(r,e),V(o[i],1)):(o[i]=st(r),o[i].c(),V(o[i],1),o[i].m(n,null))}for(B(),i=l.length;i<o.length;i+=1)r(i);U()}},i(t){if(!e){for(let t=0;t<l.length;t+=1)V(o[t]);e=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)J(o[t]);e=!1},d(t){t&&s(n),f(o,t)}}}function st(t){let e,l;const o=[t[20],{sum:t[3]},{editable:t[5]},{miltiplier:t[7]}];let r={};for(let t=0;t<o.length;t+=1)r=n(r,o[t]);return e=new dt({props:r}),e.$on("RemoveChild",t[15]),e.$on("AddChild",t[16]),e.$on("CountChange",t[17]),e.$on("NameChange",t[18]),{c(){W(e.$$.fragment)},m(t,n){q(e,t,n),l=!0},p(t,n){const l=172&n?P(o,[4&n&&M(t[20]),8&n&&{sum:t[3]},32&n&&{editable:t[5]},128&n&&{miltiplier:t[7]}]):{};e.$set(l)},i(t){l||(V(e.$$.fragment,t),l=!0)},o(t){J(e.$$.fragment,t),l=!1},d(t){z(e,t)}}}function ft(t){let n,e,l,o,r,i,f,m;function g(t,n){return t[5]?ot:lt}let $=g(t),v=$(t);function b(t,n){return t[3]?it:rt}let y=b(t),C=y(t),x=!t[3]&&ct(t),j=t[2].length&&ut(t);return{c(){n=a("main"),e=a("div"),v.c(),l=h(),o=a("div"),r=d("x\r\n      "),C.c(),i=h(),x&&x.c(),f=h(),j&&j.c(),p(e,"class","text svelte-1jn026s"),p(n,"id",t[4]),p(n,"class","svelte-1jn026s")},m(t,s){u(t,n,s),c(n,e),v.m(e,null),c(e,l),c(e,o),c(o,r),C.m(o,null),c(e,i),x&&x.m(e,null),c(n,f),j&&j.m(n,null),m=!0},p(t,[r]){$===($=g(t))&&v?v.p(t,r):(v.d(1),v=$(t),v&&(v.c(),v.m(e,l))),y===(y=b(t))&&C?C.p(t,r):(C.d(1),C=y(t),C&&(C.c(),C.m(o,null))),t[3]?x&&(x.d(1),x=null):x?x.p(t,r):(x=ct(t),x.c(),x.m(e,null)),t[2].length?j?(j.p(t,r),4&r&&V(j,1)):(j=ut(t),j.c(),V(j,1),j.m(n,null)):j&&(B(),J(j,1,1,(()=>{j=null})),U()),(!m||16&r)&&p(n,"id",t[4])},i(t){m||(V(j),m=!0)},o(t){J(j),m=!1},d(t){t&&s(n),v.d(),C.d(),x&&x.d(),j&&j.d()}}}function at(t,n,e){let l;const o=C();let{name:r="Undefined"}=n,{count:i=u}=n,{children:c=[]}=n,{sum:u=!1}=n,{miltiplier:s=1}=n,{uuid:f}=n,{editable:a=!1}=n,d=r;return t.$$set=t=>{"name"in t&&e(1,r=t.name),"count"in t&&e(0,i=t.count),"children"in t&&e(2,c=t.children),"sum"in t&&e(3,u=t.sum),"miltiplier"in t&&e(12,s=t.miltiplier),"uuid"in t&&e(4,f=t.uuid),"editable"in t&&e(5,a=t.editable)},t.$$.update=()=>{4105&t.$$.dirty&&e(7,l=u?i*s:i)},[i,r,c,u,f,a,d,l,function(){o("AddChild",{uuid:f})},function(){o("RemoveChild",{uuid:f})},function(){o("CountChange",{uuid:f,count:i})},function(){o("NameChange",{uuid:f,name:d})},s,function(){d=this.value,e(6,d)},function(){i=g(this.value),e(0,i)},function(n){x.call(this,t,n)},function(n){x.call(this,t,n)},function(n){x.call(this,t,n)},function(n){x.call(this,t,n)}]}class dt extends G{constructor(t){super(),F(this,t,at,ft,i,{name:1,count:0,children:2,sum:3,miltiplier:12,uuid:4,editable:5})}}function ht(t,n,e){const l=t.slice();return l[11]=n[e],l}function mt(t,n,e){const l=t.slice();return l[11]=n[e],l}function pt(t,n,e){const l=t.slice();return l[11]=n[e],l}function gt(t){let e,l;const o=[t[11],{sum:!1},{editable:!0}];let r={};for(let t=0;t<o.length;t+=1)r=n(r,o[t]);return e=new dt({props:r}),e.$on("CountChange",t[4]),e.$on("RemoveChild",t[3]),e.$on("AddChild",t[2]),e.$on("NameChange",t[6]),{c(){W(e.$$.fragment)},m(t,n){q(e,t,n),l=!0},p(t,n){const l=1&n?P(o,[M(t[11]),o[1],o[2]]):{};e.$set(l)},i(t){l||(V(e.$$.fragment,t),l=!0)},o(t){J(e.$$.fragment,t),l=!1},d(t){z(e,t)}}}function $t(t){let e,l;const o=[t[11],{sum:!0},{editable:!1}];let r={};for(let t=0;t<o.length;t+=1)r=n(r,o[t]);return e=new dt({props:r}),e.$on("CountChange",t[4]),e.$on("RemoveChild",t[3]),e.$on("AddChild",t[2]),e.$on("NameChange",t[6]),{c(){W(e.$$.fragment)},m(t,n){q(e,t,n),l=!0},p(t,n){const l=1&n?P(o,[M(t[11]),o[1],o[2]]):{};e.$set(l)},i(t){l||(V(e.$$.fragment,t),l=!0)},o(t){J(e.$$.fragment,t),l=!1},d(t){z(e,t)}}}function vt(t){let n,e,l,o,r,i,f,m,g=t[11][0]+"",v=t[11][1]+"";return{c(){n=a("div"),e=a("div"),l=d(g),o=h(),r=a("div"),i=d("x "),f=d(v),m=h(),p(e,"class","total_name svelte-10crljc"),p(n,"class","total_item svelte-10crljc")},m(t,s){u(t,n,s),c(n,e),c(e,l),c(n,o),c(n,r),c(r,i),c(r,f),c(n,m)},p(t,n){2&n&&g!==(g=t[11][0]+"")&&$(l,g),2&n&&v!==(v=t[11][1]+"")&&$(f,v)},d(t){t&&s(n)}}}function bt(t){let n,e,l,o,r,i,g,$,v,b,y,C,x,j,w,_,E=t[0],A=[];for(let n=0;n<E.length;n+=1)A[n]=gt(pt(t,E,n));const S=t=>J(A[t],1,1,(()=>{A[t]=null}));let k=t[0],L=[];for(let n=0;n<k.length;n+=1)L[n]=$t(mt(t,k,n));const O=t=>J(L[t],1,1,(()=>{L[t]=null}));let N=Object.entries(t[1]),R=[];for(let n=0;n<N.length;n+=1)R[n]=vt(ht(t,N,n));return{c(){n=a("main"),e=a("div"),e.textContent="MATERIAL CALCULATOR",l=h(),o=a("div"),r=a("div");for(let t=0;t<A.length;t+=1)A[t].c();i=h(),g=a("div");for(let t=0;t<L.length;t+=1)L[t].c();$=h(),v=a("div"),v.textContent="TOTAL:",b=d("\n  (bullshit)\n  "),y=a("div");for(let t=0;t<R.length;t+=1)R[t].c();C=h(),x=a("button"),x.textContent="Export JSON",p(e,"class","app-title svelte-10crljc"),p(r,"class","left svelte-10crljc"),p(g,"class","right svelte-10crljc"),p(o,"class","mainBody svelte-10crljc"),p(v,"class","total-label svelte-10crljc"),p(y,"class","total svelte-10crljc"),p(n,"class","svelte-10crljc")},m(s,f){u(s,n,f),c(n,e),c(n,l),c(n,o),c(o,r);for(let t=0;t<A.length;t+=1)A[t].m(r,null);c(o,i),c(o,g);for(let t=0;t<L.length;t+=1)L[t].m(g,null);c(n,$),c(n,v),c(n,b),c(n,y);for(let t=0;t<R.length;t+=1)R[t].m(y,null);c(n,C),c(n,x),j=!0,w||(_=m(x,"click",t[5]),w=!0)},p(t,[n]){if(93&n){let e;for(E=t[0],e=0;e<E.length;e+=1){const l=pt(t,E,e);A[e]?(A[e].p(l,n),V(A[e],1)):(A[e]=gt(l),A[e].c(),V(A[e],1),A[e].m(r,null))}for(B(),e=E.length;e<A.length;e+=1)S(e);U()}if(93&n){let e;for(k=t[0],e=0;e<k.length;e+=1){const l=mt(t,k,e);L[e]?(L[e].p(l,n),V(L[e],1)):(L[e]=$t(l),L[e].c(),V(L[e],1),L[e].m(g,null))}for(B(),e=k.length;e<L.length;e+=1)O(e);U()}if(2&n){let e;for(N=Object.entries(t[1]),e=0;e<N.length;e+=1){const l=ht(t,N,e);R[e]?R[e].p(l,n):(R[e]=vt(l),R[e].c(),R[e].m(y,null))}for(;e<R.length;e+=1)R[e].d(1);R.length=N.length}},i(t){if(!j){for(let t=0;t<E.length;t+=1)V(A[t]);for(let t=0;t<k.length;t+=1)V(L[t]);j=!0}},o(t){A=A.filter(Boolean);for(let t=0;t<A.length;t+=1)J(A[t]);L=L.filter(Boolean);for(let t=0;t<L.length;t+=1)J(L[t]);j=!1},d(t){t&&s(n),f(A,t),f(L,t),f(R,t),w=!1,_()}}}function yt(t,n=1){let e={};for(let l of t){if(!l)continue;e[l.name]||l.children.length?l.children.length||(e[l.name]+=l.count*n):e[l.name]=l.count*n;let t=yt(l.children,l.count*n);if(0!=Object.entries(t).length)for(let n of Object.entries(t).map((t=>({name:t[0],count:t[1],children:t[2]||[]}))))e[n.name]?e[n.name]+=n.count:e[n.name]=n.count}return e}function Ct(t,n){for(let[e,l]of n.entries()){if(l.uuid==t)return{found:!0,index:e};if(!l.children.length)continue;let n=Ct(t,l.children);if(n)return n.found?[e,n.index]:[e,...n]}return!1}function xt(t,n,e){let l;class o{constructor(t,n,e=[]){this.name=t,this.count=n,this.children=e,this.uuid=nt()}}let r=[];function i(){return e(1,r=yt(l)),!0}return t.$$.update=()=>{1&t.$$.dirty&&l&&i()&&(console.log("Saving"),localStorage.setItem("LastList",JSON.stringify(l)))},e(0,l=localStorage.getItem("LastList")?JSON.parse(localStorage.getItem("LastList")):[new o("Potter",1,[new o("Ceramic",5,[new o("Clay",2,[new o("Sand",2),new o("Water",1)])]),new o("Water",1)])]),[l,r,function({detail:t}){let n=Ct(t.uuid,l),r=l[n[0]];for(let t=1;t<n.length;t++)r=r.children[n[t]];r.children.push(new o("New Item",1,[])),e(0,l)},function({detail:t}){let n=Ct(t.uuid,l);n.found&&(n=[n.index]);let o=l[n[0]];for(let t=1;t<n.length-1;t++)o=o.children[n[t]];o.children.splice([n[n.length-1]],1),e(0,l)},function({detail:t}){let n=Ct(t.uuid,l);n.found&&(n=[n.index]);let o=l[n[0]];for(let t=1;t<n.length;t++)o=o.children[n[t]];o.count=t.count,e(0,l)},function(){navigator.clipboard.writeText(JSON.stringify(l))},function({detail:t}){let n=Ct(t.uuid,l);n.found&&(n=[n.index]);let o=l[n[0]];for(let t=1;t<n.length;t++)o=o.children[n[t]];o.name=t.name,e(0,l)}]}return new class extends G{constructor(t){super(),F(this,t,xt,bt,i,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
